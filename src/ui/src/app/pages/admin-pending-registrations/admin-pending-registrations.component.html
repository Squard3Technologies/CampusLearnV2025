<div class="admin-container">
  <!-- Breadcrumb Navigation -->
  <div class="breadcrumb-container">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">        <li class="breadcrumb-item">
          <a [routerLink]="['/home']" class="breadcrumb-link">Home</a>
        </li>
        <li class="breadcrumb-item">
          <a [routerLink]="['/admin']" class="breadcrumb-link">Admin</a>
        </li>
        <li class="breadcrumb-item active" aria-current="page">Pending Registrations</li>
      </ol>
    </nav>
  </div>

  <!-- Main Container for Sidebar and Content -->
  <div class="main-container">
    <!-- Sidebar -->
    <div class="sidebar">
      <h3>Admin Sections</h3>
      <ul class="tabs">
        <li class="tab clickable" (click)="navigateToUserManagement()">User Management</li>
        <li class="tab active">Pending Registrations</li>
        <li class="tab clickable" (click)="navigateToModuleManagement()">Module Management</li>
      </ul>
    </div>

    <!-- Main Content -->
    <div class="main-content">
      <div class="content-header">
        <h2>Pending Registrations</h2>
        <p>Review and approve or reject new user registration requests.</p>
      </div>


      <!-- Search and Filter Controls -->
      <div class="controls-section">
        <div class="search-box">
          <i class="fas fa-search"></i>
          <input type="text" placeholder="Search registrations..." [(ngModel)]="searchTerm" (input)="filterRegistrations()">
        </div>
        <div class="filter-controls">
          <select [(ngModel)]="roleFilter" (change)="filterRegistrations()" class="filter-select">
            <option value="">All Roles</option>
            <option value="Student">Students</option>
            <option value="Tutor">Tutors</option>
          </select>
          <select [(ngModel)]="dateFilter" (change)="filterRegistrations()" class="filter-select">
            <option value="">All Dates</option>
            <option value="today">Today</option>
            <option value="week">This Week</option>
            <option value="month">This Month</option>
          </select>
        </div>
      </div>

      <!-- Registrations Table -->
      <div class="table-container">
        <table class="registrations-table">
          <thead>
            <tr>
              <th>Name</th>
              <th>Email</th>
              <th>Requested Role</th>
              <th>Registration Date</th>
              <th>Documents</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let registration of filteredRegistrations">
              <td>
                <div class="user-info">
                  <div class="avatar">
                    <i class="fas fa-user"></i>
                  </div>
                  <span>{{ registration.fullName }}</span>
                </div>
              </td>
              <td>{{ registration.email }}</td>
              <td>
                <span class="role-badge" [ngClass]="getRoleClass(registration.requestedRole)">
                  {{ registration.requestedRole }}
                </span>
              </td>
              <td>{{ registration.registrationDate | date:'short' }}</td>
              <td>
                <div class="documents-info">
                  <span class="document-count" *ngIf="registration.documents.length > 0">
                    <i class="fas fa-file-alt"></i> {{ registration.documents.length }} files
                  </span>
                  <span class="no-documents" *ngIf="registration.documents.length === 0">
                    <i class="fas fa-exclamation-triangle"></i> No documents
                  </span>
                </div>
              </td>
              <td>
                <div class="action-buttons">
                  <button class="btn btn-sm btn-info" (click)="viewDetails(registration)" title="View Details">
                    <i class="fas fa-eye"></i>
                  </button>
                  <button class="btn btn-sm btn-success" (click)="approveRegistration(registration)" title="Approve">
                    <i class="fas fa-check"></i>
                  </button>
                  <button class="btn btn-sm btn-danger" (click)="rejectRegistration(registration)" title="Reject">
                    <i class="fas fa-times"></i>
                  </button>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Empty State -->
      <div class="empty-state" *ngIf="filteredRegistrations.length === 0">
        <div class="empty-icon">
          <i class="fas fa-inbox"></i>
        </div>
        <h3>No Pending Registrations</h3>
        <p>There are no registration requests matching your current filters.</p>
      </div>

      <!-- Pagination -->
      <div class="pagination-container" *ngIf="filteredRegistrations.length > 0">
        <div class="pagination-info">
          Showing {{ (currentPage - 1) * pageSize + 1 }} to 
          {{ Math.min(currentPage * pageSize, filteredRegistrations.length) }} of 
          {{ filteredRegistrations.length }} registrations
        </div>
        <div class="pagination-controls">
          <button class="btn btn-outline-primary" 
                  [disabled]="currentPage === 1" 
                  (click)="previousPage()">
            Previous
          </button>
          <span class="page-info">Page {{ currentPage }} of {{ totalPages }}</span>
          <button class="btn btn-outline-primary" 
                  [disabled]="currentPage === totalPages" 
                  (click)="nextPage()">
            Next
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
