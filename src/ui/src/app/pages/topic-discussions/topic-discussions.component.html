<div class="topic-discussions-container">
  <!-- Breadcrumb Navigation -->
  <div class="breadcrumb-container">
    <nav aria-label="breadcrumb">      <ol class="breadcrumb">
        <li class="breadcrumb-item">
          <a [routerLink]="['/modules']" class="breadcrumb-link">Modules</a>
        </li>
        <li class="breadcrumb-item">
          <a [routerLink]="['/modules', moduleId]" class="breadcrumb-link">{{ moduleName || 'Module' }}</a>
        </li>
        <li class="breadcrumb-item">
          <a [routerLink]="['/topic', topicId]" [queryParams]="{ moduleId: moduleId, moduleName: moduleName }" class="breadcrumb-link">Topic</a>
        </li>
        <li class="breadcrumb-item active" aria-current="page">Discussions</li>
      </ol>
    </nav>
  </div>

  <!-- Main Container for Sidebar and Content -->
  <div class="main-container">
    <!-- Sidebar -->
    <div class="sidebar">
      <h3>Topic Sections</h3>      <ul class="tabs">
        <li class="tab clickable" (click)="navigateToTopicOverview()">Overview</li>
        <li class="tab">Materials</li>
        <li class="tab active">Discussion</li>
        <li class="tab">Quizzes</li>
      </ul>
    </div>

    <!-- Main Content -->
    <div class="main-content">
      <div class="discussions-header">
        <h2>Topic Discussions</h2>
        <button class="btn btn-primary new-post-btn">New Post</button>
      </div>

      <!-- Discussion Posts -->
      <div class="posts-container">
        <div class="post-card" *ngFor="let post of discussionPosts">
          <div class="post-header">
            <div class="post-author">
              <div class="author-avatar">
                <span>{{ post.author.name.charAt(0).toUpperCase() }}</span>
              </div>
              <div class="author-info">
                <h4>{{ post.author.name }}</h4>
                <span class="post-time">{{ post.timestamp | date:'medium' }}</span>
              </div>
            </div>
            <div class="post-actions">
              <button class="btn btn-sm btn-outline-secondary">Reply</button>
            </div>
          </div>

          <div class="post-content">
            <h5>{{ post.title }}</h5>
            <p>{{ post.content }}</p>
          </div>

          <div class="post-stats">
            <span class="stat-item">
              <i class="fas fa-thumbs-up"></i> {{ post.likes || 0 }}
            </span>
            <span class="stat-item">
              <i class="fas fa-comment"></i> {{ post.comments?.length || 0 }} Comments
            </span>
          </div>

          <!-- Comments Section -->
          <div class="comments-section" *ngIf="post.comments && post.comments.length > 0">
            <h6>Comments</h6>
            <div class="comment" *ngFor="let comment of post.comments">
              <div class="comment-header">
                <div class="comment-author">
                  <div class="author-avatar small">
                    <span>{{ comment.author.name.charAt(0).toUpperCase() }}</span>
                  </div>
                  <div class="author-info">
                    <strong>{{ comment.author.name }}</strong>
                    <span class="comment-time">{{ comment.timestamp | date:'short' }}</span>
                  </div>
                </div>
              </div>
              <div class="comment-content">
                <p>{{ comment.content }}</p>
              </div>
            </div>
          </div>

          <!-- Add Comment Form -->
          <div class="add-comment">
            <div class="comment-form">
              <textarea 
                class="form-control" 
                placeholder="Add a comment..." 
                rows="2"
                [(ngModel)]="newComment[post.id]">
              </textarea>
              <button class="btn btn-sm btn-primary mt-2" (click)="addComment(post.id)">
                Post Comment
              </button>
            </div>
          </div>
        </div>

        <!-- No Posts Message -->
        <div class="no-posts" *ngIf="discussionPosts.length === 0">
          <p>No discussions yet. Be the first to start a conversation!</p>
        </div>
      </div>
    </div>
  </div>
</div>
